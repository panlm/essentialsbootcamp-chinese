.. _prism_pro_effeciency_anomaly:

--------------------------------------------
Prism Pro: VM 效率 & 异常发现
--------------------------------------------

简介
++++++++



实验设置
+++++++++

该实验需要配置VM，稍后将在实验中加压力测试以生成CPU和内存指标。

#. 在开始这个实验之前，请按照说明进行部署 :ref:`linux_tools_vm` 


#. 右键单击以下URL以打开一个新选项卡，并导航至位于http://10.42.247.70的网页，然后在表单的“设置”部分中输入详细信息。 填写所有字段后，请点击“开始设置”。 这将为您准备好本实验的环境。 **请在整个Prism Pro实验期间将此标签保持打开状态，然后再按指示返回。**

   .. figure:: images/ppro_08.png

#. 点击继续后，安装过程将花费一些时间。 同时，切换回Prism Central并通过实验室。

VM Efficiency
+++++++++++++++++++++++++++

Prism Pro使用X-Fit机器学习来检测在托管群集中运行的VM的行为。 然后对被认为效率低下的VM进行分类。 以下是不同分类的简短说明：

* **Overprovisioned:** 标识为使用最少数量的已分配资源的VM。
* **Inactive:** 已关闭电源一段时间或正在运行的VM不会消耗任何CPU，内存或I / O资源。
* **Constrained:** 可以通过其他资源来提高性能的VM。
* **Bully:** 被确定为使用了大量资源并影响其他VM的VM。

#. 在 **Prism Central**, 选择 :fa:`bars` **> Dashboard**.

#. 在仪表板上，查看“ VM效率”小部件。 此小部件概述了Prism Pro的X-FIT机器学习在您的环境中检测到的低效VM。 点击小部件底部的“查看所有Inefficeint虚拟机”链接，以进行更仔细的查看。

   .. figure:: images/ppro_58.png

#. 现在，您将在VM列表视图中查看“效率”焦点，并详细了解为何Prism Pro标记了这些VM。 您可以将鼠标悬停在“效率详细信息”列中的文本以查看完整的描述。

   .. figure:: images/ppro_59.png

#. 管理员检查了效率列表中的VM列表后，他们可以确定希望对其采取行动的任何VM。 对于资源过多或不足的VM，它们将需要调整各个VM的大小。 可以通过以下几种示例以多种方式完成此操作：

* **Manually:** 管理员通过Prism或vCenter为ESXi VM编辑VM配置并更改分配的资源。
* **X-Play:** 使用X-Play自动剧本通过触发器或管理员指示自动调整VM的大小。 在本实验的后面，将有一个实验的例子。
* **Automation:** 使用其他一些自动化方法，例如powershell或REST-API来调整VM的大小。


异常检测
+++++++++++++++++++++++++++++++

在本实验中，您将了解异常的虚拟机。 异常是与VM正常学习行为的偏差。 X-FIT算法学习VM的正常行为，并将其表示为每个VM在不同图表上的基线范围。

#. 现在，通过搜索“ bootcamp_good”并选择“ bootcamp_good_1”来查看虚拟机。

   .. figure:: images/ppro_61.png

#. 转到指标> CPU使用率。 请注意，一条深蓝色的线及其周围的浅蓝色区域。 深蓝色线是CPU使用率。 浅蓝色区域是此VM的预期CPU使用率范围。 该范围是使用Prism Pro的X-FIT机器学习引擎计算得出的。 在这种情况下，此虚拟机已出现异常，因为“使用情况”远低于预期范围。 您还可以缩短“过去24小时”的时间范围，以更仔细地检查图表。

   .. figure:: images/ppro_60.png

#. 单击 **Alert Setting**来为这种情况设置警报策略。

#. 在右侧，您可以根据需要更改某些配置。 在此示例中，我更改了“行为异常”阈值以忽略10％到70％之间的异常。 所有其他异常将生成警告警报。 如果此VM上的CPU使用率超过95％，我还将“静态”阈值调整为“严重警报”。

   .. figure:: images/ppro_25.png

#. 点击 **Cancel**退出策略创建工作流程。

概要总结
+++++++++

-Prism Pro是我们使IT OPS更加智能和自动化的解决方案。 它涵盖从智能检测到自动修复的IT OPS流程。
-X-FIT是我们的机器学习引擎，可支持智能IT OPS，包括预测，异常检测和效率低下检测。
